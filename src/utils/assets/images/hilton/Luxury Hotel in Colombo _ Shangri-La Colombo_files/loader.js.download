var _window$performance,_window$performance2,isNative=function(){for(var e=null,t=[Object,Function,Number],n=0;null===e&&n<t.length;)-1===((e=t[n].prototype.toString)+"").indexOf("native")&&(e=null,n+=1);var r=Function.prototype.toString,o=/^\[object .+?Constructor\]$/,i=RegExp("^"+(e+"").replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return null===e?function(e){return!0}:function(t){var n=typeof t;return"function"==n?i.test(r.call(t)):t&&"object"==n&&o.test(e.call(t))||!1}}();!function(e){var t="currentScript";t in e||Object.defineProperty(e,t,{get:function(){try{throw Error()}catch(u){var t,n,r,o=0,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(u.stack),a=i&&i[1]||!1,c=i&&i[2]||!1,s=e.location.href.replace(e.location.hash,""),l=e.getElementsByTagName("script");for(a===s&&(t=e.documentElement.outerHTML,n=RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=t.replace(n,"$1").trim());o<l.length;o++){if("interactive"===l[o].readyState)return l[o];if(l[o].src===a)return l[o];if(a===s&&l[o].innerHTML&&l[o].innerHTML.trim()===r)return l[o]}return null}}})}(document),function(){if(!document.currentScript)return!1;var e,t,n="https://www.thehotelsnetwork.com/polyfill/v3/polyfill.min.js",r={generic:{test:function(){const e=!!(window.URL&&"Symbol"in self&&window.EventSource&&window.fetch&&"name"in Function.prototype&&"isInteger"in Number&&"MAX_SAFE_INTEGER"in Number&&"Promise"in self&&[].fill&&[].flat&&[].includes&&[].flatMap&&Object.assign&&window.Map&&window.WeakMap&&window.requestIdleCallback&&"navigator"in self&&"sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&"AbortController"in self&&"function"==typeof self.AbortController&&"padStart"in String.prototype&&"padEnd"in String.prototype&&"replaceAll"in String.prototype&&"includes"in String.prototype&&"queueMicrotask"in self&&"object"==typeof globalThis),t=null!==document.querySelector('script[src="'+r.generic.urls[0]+'"]');return!e&&!t},urls:["".concat(n,"?version=3.111.0&features=Symbol%2Cdefault%2Cfetch%2CEventSource%2CFunction.name%2CNumber.isInteger%2CNumber.MAX_SAFE_INTEGER%2CWeakMap%2CrequestIdleCallback%2CArray.prototype.flat%2CArray.prototype.includes%2CArray.prototype.flatMap%2Cnavigator.sendBeacon%2CAbortController%2CString.prototype.padStart%2CString.prototype.padEnd%2CString.prototype.replaceAll%2CqueueMicrotask%2CglobalThis")]},"Fn.bind":{test:function(){const e=isNative(Function.prototype.bind),t=null!==document.querySelector('script[src="'+r["Fn.bind"].urls[0]+'"]');return!e&&!t},urls:["".concat(n,"?version=3.111.0&features=Function.prototype.bind%7Calways&excludes=Object.defineProperty")]}},o=[window,document,"script"],i=[],a=function(e,t,n,r,o,a){var c;o=t.createElement(n),a=t.currentScript,o.src=r,o.inject=function(){(a.parentNode||t.head).insertBefore(o,a.parentNode&&a||t.head.lastElementChild),setTimeout(o.onload,1e3)},o.onload=(c=!1,function(){c||(c=!0,(i.shift()||{inject:function(){}}).inject())}),i.push(o)};for(e in r)if(r.hasOwnProperty(e)&&r[e].test())for(t=0;t<r[e].urls.length;t+=1)a.apply(null,o.concat(r[e].urls[t]));var c=i.length;return c&&(a.apply(null,o.concat(document.currentScript.src)),i.shift().inject()),!!c}()||(null===(_window$performance=window.performance)||void 0===_window$performance||_window$performance.clearMarks("thn-loader-start"),null===(_window$performance2=window.performance)||void 0===_window$performance2||_window$performance2.mark("thn-loader-start",{details:{currentScript:document.currentScript}}),function(){"use strict";"undefined"==typeof self||self.thn||(self.thn={},function(){function e(e,t){return(t||"")+" (SystemJS https://github.com/systemjs/systemjs/blob/main/docs/errors.md#"+e+")"}function t(e,t){if(-1!==e.indexOf("\\")&&(e=e.replace(E,"/")),"/"===e[0]&&"/"===e[1])return t.slice(0,t.indexOf(":")+1)+e;if("."===e[0]&&("/"===e[1]||"."===e[1]&&("/"===e[2]||2===e.length&&(e+="/"))||1===e.length&&(e+="/"))||"/"===e[0]){var n,r=t.slice(0,t.indexOf(":")+1);if(n="/"===t[r.length+1]?"file:"!==r?(n=t.slice(r.length+2)).slice(n.indexOf("/")+1):t.slice(8):t.slice(r.length+("/"===t[r.length])),"/"===e[0])return t.slice(0,t.length-n.length-1)+e;for(var o=n.slice(0,n.lastIndexOf("/")+1)+e,i=[],a=-1,c=0;c<o.length;c++)-1!==a?"/"===o[c]&&(i.push(o.slice(a,c+1)),a=-1):"."===o[c]?"."!==o[c+1]||"/"!==o[c+2]&&c+2!==o.length?"/"===o[c+1]||c+1===o.length?c+=1:a=c:(i.pop(),c+=2):a=c;return-1!==a&&i.push(o.slice(a)),t.slice(0,t.length-n.length)+i.join("")}}function n(e,n){return t(e,n)||(-1!==e.indexOf(":")?e:t("./"+e,n))}function r(e,n,r,o,i){for(var a in e){var l=t(a,r)||a,u=e[a];if("string"==typeof u){var f=s(o,t(u,r)||u,i);f?n[l]=f:c("W1",a,u)}}}function o(e,t,o){var i;for(i in e.imports&&r(e.imports,o.imports,t,o,null),e.scopes||{}){var a=n(i,t);r(e.scopes[i],o.scopes[a]||(o.scopes[a]={}),t,o,a)}for(i in e.depcache||{})o.depcache[n(i,t)]=e.depcache[i];for(i in e.integrity||{})o.integrity[n(i,t)]=e.integrity[i]}function i(e,t){if(t[e])return e;var n=e.length;do{var r=e.slice(0,n+1);if(r in t)return r}while(-1!==(n=e.lastIndexOf("/",n-1)))}function a(e,t){var n=i(e,t);if(n){var r=t[n];if(null===r)return;if(!(e.length>n.length&&"/"!==r[r.length-1]))return r+e.slice(n.length);c("W2",n,r)}}function c(t,n,r,o){console.warn(e(t,[r,n].join(", ")))}function s(e,t,n){for(var r=e.scopes,o=n&&i(n,r);o;){var c=a(t,r[o]);if(c)return c;o=i(o.slice(0,o.lastIndexOf("/")),r)}return a(t,e.imports)||-1!==t.indexOf(":")&&t}function l(){this[T]={}}function u(t,n,r,o){var i=n.split("?")[0],a=t[T][i];if(a)return a;var c=[],s=Object.create(null);P&&Object.defineProperty(s,P,{value:"Module"});var l=Promise.resolve().then((function(){return t.instantiate(n,r,o)})).then((function(r){if(!r)throw Error(e(2,n));var o=r[1]((function(e,t){a.h=!0;var n=!1;if("string"==typeof e)e in s&&s[e]===t||(s[e]=t,n=!0);else{for(var r in e)t=e[r],r in s&&s[r]===t||(s[r]=t,n=!0);e&&e.__esModule&&(s.__esModule=e.__esModule)}if(n)for(var o=0;o<c.length;o++){var i=c[o];i&&i(s)}return t}),2===r[1].length?{import:function(e,n){return t.import(e,i,n)},meta:t.createContext(i)}:void 0);return a.e=o.execute||function(){},[r[0],o.setters||[],r[2]||[]]}),(function(e){throw a.e=null,a.er=e,e})),f=l.then((function(e){return Promise.all(e[0].map((function(n,r){var o=e[1][r],a=e[2][r];return Promise.resolve(t.resolve(n,i)).then((function(e){var n=u(t,e,i,a);return Promise.resolve(n.I).then((function(){return o&&(n.i.push(o),!n.h&&n.I||o(n.n)),n}))}))}))).then((function(e){a.d=e}))}));return a=t[T][i]={id:i,i:c,n:s,m:o,I:l,L:f,h:!1,d:void 0,e:void 0,er:void 0,E:void 0,C:void 0,p:void 0}}function f(e,t,n,r){if(!r[t.id])return r[t.id]=!0,Promise.resolve(t.L).then((function(){return t.p&&null!==t.p.e||(t.p=n),Promise.all(t.d.map((function(t){return f(e,t,n,r)})))})).catch((function(e){if(t.er)throw e;throw t.e=null,e}))}function d(e,t){return t.C=f(e,t,t,{}).then((function(){return h(e,t,{})})).then((function(){return t.n}))}function h(e,t,n){function r(){try{var e=i.call(j);if(e)return e=e.then((function(){t.C=t.n,t.E=null}),(function(e){throw t.er=e,t.E=null,e})),t.E=e;t.C=t.n,t.L=t.I=void 0}catch(e){throw t.er=e,e}}if(!n[t.id]){if(n[t.id]=!0,!t.e){if(t.er)throw t.er;return t.E?t.E:void 0}var o,i=t.e;return t.e=null,t.d.forEach((function(r){try{var i=h(e,r,n);i&&(o=o||[]).push(i)}catch(e){throw t.er=e,e}})),o?Promise.all(o).then(r):r()}}function p(){[].forEach.call(document.querySelectorAll("script"),(function(t){if(!t.sp)if("systemjs-module"===t.type){if(t.sp=!0,!t.src)return;System.import("import:"===t.src.slice(0,7)?t.src.slice(7):n(t.src,m)).catch((function(e){if(e.message.indexOf("https://github.com/systemjs/systemjs/blob/main/docs/errors.md#3")>-1){var n=document.createEvent("Event");n.initEvent("error",!1,!1),t.dispatchEvent(n)}return Promise.reject(e)}))}else if("systemjs-importmap"===t.type){t.sp=!0;var r=t.src?(System.fetch||fetch)(t.src,{integrity:t.integrity,passThrough:!0}).then((function(e){if(!e.ok)throw Error(e.status);return e.text()})).catch((function(n){return n.message=e("W4",t.src)+"\n"+n.message,console.warn(n),"function"==typeof t.onerror&&t.onerror(),"{}"})):t.innerHTML;x=x.then((function(){return r})).then((function(n){!function(t,n,r){var i={};try{i=JSON.parse(n)}catch(t){console.warn(Error(e("W5")))}o(i,r,t)}(L,n,t.src||m)}))}}))}var m,v="undefined"!=typeof Symbol,g="undefined"!=typeof self,y="undefined"!=typeof document,w=g?self:global;if(y){var b=document.querySelector("base[href]");b&&(m=b.href)}if(!m&&"undefined"!=typeof location){var S=(m=location.href.split("#")[0].split("?")[0]).lastIndexOf("/");-1!==S&&(m=m.slice(0,S+1))}var _,E=/\\/g,P=v&&Symbol.toStringTag,T=v?Symbol():"@",C=l.prototype;C.import=function(e,t,n){var r=this;return t&&"object"==typeof t&&(n=t,t=void 0),Promise.resolve(r.prepareImport()).then((function(){return r.resolve(e,t,n)})).then((function(e){var t=u(r,e,void 0,n);return t.C||d(r,t)}))},C.createContext=function(e){var t=this;return{url:e,resolve:function(n,r){return Promise.resolve(t.resolve(n,r||e))}}},C.register=function(e,t,n){_=[e,t,n]},C.getRegister=function(){var e=_;return _=void 0,e};var j=Object.freeze(Object.create(null));w.thn.System=new l;var O,k,x=Promise.resolve(),L={imports:{},scopes:{},depcache:{},integrity:{}},I=y;if(C.prepareImport=function(e){return(I||e)&&(p(),I=!1),x},y&&(p(),window.addEventListener("DOMContentLoaded",p)),C.addImportMap=function(e,t){o(e,t||m,L)},y){window.addEventListener("error",(function(e){A=e.filename,$=e.error}));var M=location.origin}C.createScript=function(e){var t=document.createElement("script");t.async=!0,e.indexOf(M+"/")&&(t.crossOrigin="anonymous");var n=L.integrity[e];return n&&(t.integrity=n),t.src=e,t};var A,$,N={},R=C.register;C.register=function(e,t){if(y&&"loading"===document.readyState&&"string"!=typeof e){var n=document.querySelectorAll("script[src]"),r=n[n.length-1];if(r){O=e;var o=this;k=setTimeout((function(){N[r.src]=[e,t],o.import(r.src)}))}}else O=void 0;return R.call(this,e,t)},C.instantiate=function(t,n){var r=N[t];if(r)return delete N[t],r;var o=this;return Promise.resolve(C.createScript(t)).then((function(r){return new Promise((function(i,a){r.addEventListener("error",(function(){a(Error(e(3,[t,n].join(", "))))})),r.addEventListener("load",(function(){if(document.head.removeChild(r),A===t)a($);else{var e=o.getRegister(t);e&&e[0]===O&&clearTimeout(k),i(e)}})),document.head.appendChild(r)}))}))},C.shouldFetch=function(){return!1},"undefined"!=typeof fetch&&(C.fetch=fetch);var F=C.instantiate,q=/^(text|application)\/(x-)?javascript(;|$)/;C.instantiate=function(t,n,r){var o=this;return this.shouldFetch(t,n,r)?this.fetch(t,{credentials:"same-origin",integrity:L.integrity[t],meta:r}).then((function(r){if(!r.ok)throw Error(e(7,[r.status,r.statusText,t,n].join(", ")));var i=r.headers.get("content-type");if(!i||!q.test(i))throw Error(e(4,i));return r.text().then((function(e){return e.indexOf("//# sourceURL=")<0&&(e+="\n//# sourceURL="+t),(0,eval)(e),o.getRegister(t)}))})):F.apply(this,arguments)},C.resolve=function(n,r){return s(L,t(n,r=r||m)||n,r)||function(t,n){throw Error(e(8,[t,n].join(", ")))}(n,r)};var U=C.instantiate;C.instantiate=function(e,t,n){var r=L.depcache[e];if(r)for(var o=0;o<r.length;o++)u(this,this.resolve(r[o],e),e);return U.call(this,e,t,n)},g&&"function"==typeof importScripts&&(C.instantiate=function(e){var t=this;return Promise.resolve().then((function(){return importScripts(e),t.getRegister(e)}))})}(),function(e){var t,n=e.thn.System.constructor.prototype,r=n.resolve;n.resolve=function(e,n){var o;return t?r.call(this,function(e){var n,r,o;return"."!==(o=e).slice(0,1)&&"http"!==o.slice(0,4)?e:(r=[(n=e.split("?"))[1],t].filter((e=>e)).join("&").replace(/\w/,"?$&"),n[0]+r)}(e),n):(o=r.call(this,e,n),t=e.split("?")[1]||o.split("?")[1]||"",o)}}("undefined"!=typeof self?self:global));const e="data-thn-current",t="__thn_script_src",n=n=>n[t]&&{src:n[t]}||n.document.querySelector("script[".concat(e,'="1"]'))||n.thn[t],r={async install(e){var r;let{thn:o,window:i}=e;const a=n(i);if(!a)return;const{URL:c}=i,s=new c(a.src);s.protocol="https:";const l=await function(e){const{URL:t}=globalThis,n=new t(e),[r,o,i,a,c,s,l]=[n.searchParams.get("property_id"),n.searchParams.get("hotel_id"),n.searchParams.get("account_key"),n.searchParams.get("bahiaprincipe_id"),n.searchParams.get("octorate_id"),n.searchParams.get("partnership_id"),n.searchParams.get("partnership_hotel_id")];if(r)return Promise.resolve({property_id:r});if(o||a||c||s&&l){const e=new t(n);return e.pathname="/get_hotel_property_rel",globalThis.fetch(""+e).then((function(e){if(!e.ok)throw Error("".concat(e.status," ").concat(e.statusText));return e.json()})).then((function(e){const t={};return e&&1===e.result?(e.property_id&&(t.property_id=e.property_id),e.account_key&&(t.account_key=e.account_key),t):t}))}return Promise.resolve(i?{account_key:i}:{})}(a.src),u=await function(e){let{params:t,baseUrl:n}=e;if(!n)return Promise.reject();const{URL:r}=globalThis,o=new r(n);return o.pathname="/get_loader_data",Object.keys(t).forEach((e=>o.searchParams.set(e,t[e]))),globalThis.fetch(""+o,{credentials:"include"}).then((e=>e.ok&&e.json())).then((e=>{var t;const n=null==e||null===(t=e.data)||void 0===t?void 0:t.init_thn_data;return n&&(n.office=e.office,n.hostname_real=n.hostname,n.hostname=o.host),e}))}({params:l,baseUrl:a.src}),{defaultVersion:f,office:d}=u;let{importmap:h}=u;const p=null==u||null===(r=u.data)||void 0===r?void 0:r.init_thn_data;if(!h){var m,v,g;const e="index".concat(!1===(null==p?void 0:p.minified)?"":".min",".js"),t=new c("/widget/core/".concat(null!==(m=null!==(v=null==p?void 0:p.version)&&void 0!==v?v:f)&&void 0!==m?m:"4.0","/dist/main/").concat(e),s),n=null==u||null===(g=u.checksums)||void 0===g?void 0:g.main[e];n&&t.searchParams.set("h",n),h={imports:{"@thehotelsnetwork/agent-main":""+t}}}o.System.addImportMap(h),await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{document:t,MutationObserver:n}=globalThis,{document:r=t,MutationObserver:o=n}=e;return r.body?Promise.resolve():new Promise((e=>{const t=new o((n=>{n.some((n=>Array.from(n.addedNodes).some((n=>n===r.body&&(t.disconnect(),e(),!0)))))}));t.observe(r.documentElement,{childList:!0})}))}(i);const{default:y}=await o.System.import("@thehotelsnetwork/agent-main");if(y.System=o.System,y[t]=o[t],i.thn=y,y.Logger.setLevel(u.loggerLevel&&y.Logger[u.loggerLevel]||d&&y.Logger.DEBUG||y.Logger.OFF),y.data.contextDefault=y.data.contextDefault||{window:i,document:document,thn:y},u.data)(y.siteCheck||y.identityCheck)({loader:u});else{const e=s.searchParams.get("partnership_id")||"";y.partnershipCheck(e)}}};var o=Object.freeze({__proto__:null,plugin:r});!function(){const r={monolith:o};if((e=>{e.requestIdleCallback=e.requestIdleCallback||(e=>setTimeout(e,1))})(globalThis),globalThis.rho&&(globalThis.receive_event=function(){const e={_isDummy:!0,_original:globalThis.receiveEvent,_registry:[]};return Object.assign((function(){e._registry.push(arguments)}),e)}()),!(n=>{let{document:r,thn:o}=n;const{currentScript:i}=r;if(i){const n=[...r.querySelectorAll("script[".concat(e,"]")),o[t]].filter(Boolean),a=n.filter((t=>!(i.src===t.src&&+t.getAttribute(e))));a.forEach((t=>{t.setAttribute(e,0)}));const c=a.length===n.length?1:0;if(i.setAttribute(e,c),!c)return!1;o[t]=i}return!0})(globalThis))return;const{URL:i}=globalThis,a=new i(n(globalThis).src);a.protocol="https:","caches"in globalThis&&async function(e,t){try{const t=await e.keys(),n=await Promise.all(t.map((t=>e.open(t)))),r=await Promise.all(n.map((e=>e.keys()))),o=[];return n.forEach(((e,t)=>{r[t].forEach((t=>{t.url.includes(a.host)&&o.push(e.delete(t))}))})),await Promise[Promise.allSettled?"allSettled":"all"](o).catch((()=>"")),""}catch(e){return""}}(globalThis.caches),Promise.resolve().then((()=>Promise.resolve({plugins:["monolith"],importmap:{}}))).then((e=>{let{plugins:t,importmap:n}=e;n&&globalThis.thn.System.addImportMap(n),t.reduce(((e,t)=>e.then((()=>(async e=>{const{thn:t}=globalThis,{plugin:n}=await(e in r?Promise.resolve(r[e]):t.System.import("@thehotelsnetowrk/agent-plugin-".concat(e)));return n.install({thn:t,window:globalThis})})(t))).catch()),Promise.resolve()).then((()=>{var e,t,n,r,o,i;try{var a,c,s,l,u,f;globalThis.thn.logger.debug("(timing) from domInteractive to loader-start:",null===(a=globalThis.performance)||void 0===a||null===(c=a.measure)||void 0===c||null===(s=c.call(a,"domInteractive:thn-loader-start:diff","domInteractive","thn-loader-start"))||void 0===s?void 0:s.duration),globalThis.thn.logger.debug("(timing) from loader-start to loader-end:",null===(l=globalThis.performance)||void 0===l||null===(u=l.measure)||void 0===u||null===(f=u.call(l,"thn-loader-start:thn-loader-end:diff","thn-loader-start"))||void 0===f?void 0:f.duration)}catch(e){}null===(e=globalThis.thn)||void 0===e||null===(t=e.logger)||void 0===t||t.debug("(timing) loader-start: ".concat(new Date(((null===(n=globalThis.performance)||void 0===n?void 0:n.timeOrigin)||0)+((null===(r=globalThis.performance)||void 0===r||null===(o=r.getEntriesByName)||void 0===o||null===(i=o.call(r,"thn-loader-start"))||void 0===i?void 0:i.reverse()[0].startTime)||0)).toISOString()))}))}))}()}());
